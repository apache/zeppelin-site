
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Apache Zeppelin 0.7.0 Documentation: Writing a new Visualization(Experimental)</title>
    <meta name="description" content="Apache Zeppelin Application is a package that runs on Interpreter process and displays it's output inside of the notebook. Make your own Application in Apache Zeppelin is quite easy.">
    <meta name="author" content="The Apache Software Foundation">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Le styles -->
    <link href="/docs/0.7.0/assets/themes/zeppelin/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="/docs/0.7.0/assets/themes/zeppelin/css/style.css?body=1" rel="stylesheet" type="text/css">
    <link href="/docs/0.7.0/assets/themes/zeppelin/css/syntax.css" rel="stylesheet"  type="text/css" media="screen" /> 
    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- Js -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="/docs/0.7.0/assets/themes/zeppelin/bootstrap/js/bootstrap.min.js"></script>
    <script src="/docs/0.7.0/assets/themes/zeppelin/js/docs.js"></script>
    <script src="/docs/0.7.0/assets/themes/zeppelin/js/anchor.min.js"></script>
    <script src="/docs/0.7.0/assets/themes/zeppelin/js/toc.js"></script>
    <script src="/docs/0.7.0/assets/themes/zeppelin/js/lunr.min.js"></script>
    <script src="/docs/0.7.0/assets/themes/zeppelin/js/search.js"></script>    

    <!-- atom & rss feed -->
    <link href="/docs/0.7.0/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/docs/0.7.0/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
  </head>

  <body>
    
        <div id="menu" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/docs/0.7.0">
            <img src="/assets/themes/zeppelin/img/zeppelin_logo.png" width="50" alt="I'm zeppelin">
            <span style="vertical-align:middle">Zeppelin</span>
            <span style="vertical-align:baseline"><small>0.7.0</small></span>
          </a>
        </div>
        <nav class="navbar-collapse collapse" role="navigation">
          <ul class="nav navbar-nav">
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Quick Start <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/docs/0.7.0/index.html">What is Apache Zeppelin ?</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Getting Started</b><span></li>
                <li><a href="/docs/0.7.0/install/install.html">Install</a></li>
                <li><a href="/docs/0.7.0/install/configuration.html">Configuration</a></li>
                <li><a href="/docs/0.7.0/quickstart/explorezeppelinui.html">Explore Zeppelin UI</a></li>
                <li><a href="/docs/0.7.0/quickstart/tutorial.html">Tutorial</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Basic Feature Guide</b><span></li>
                <li><a href="/docs/0.7.0/manual/dynamicform.html">Dynamic Form</a></li>
                <li><a href="/docs/0.7.0/manual/publish.html">Publish your Paragraph</a></li>
                <li><a href="/docs/0.7.0/manual/notebookashomepage.html">Customize Zeppelin Homepage</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>More</b><span></li>
                <li><a href="/docs/0.7.0/install/upgrade.html">Upgrade Zeppelin Version</a></li>
                <li><a href="/docs/0.7.0/install/build.html">Build from source</a></li>
                <li><a href="/docs/0.7.0/quickstart/install_with_flink_and_spark_cluster.html">Install Zeppelin with Flink and Spark Clusters Tutorial</a></li>
              </ul>
            </li>
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Interpreter <b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu">
                <li><a href="/docs/0.7.0/manual/interpreters.html">Overview</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Usage</b><span></li>
                <li><a href="/docs/0.7.0/manual/interpreterinstallation.html">Interpreter Installation</a></li>
                <!--<li><a href="/docs/0.7.0/manual/dynamicinterpreterload.html">Dynamic Interpreter Loading</a></li>-->
                <li><a href="/docs/0.7.0/manual/dependencymanagement.html">Interpreter Dependency Management</a></li>
                <li><a href="/docs/0.7.0/manual/userimpersonation.html">Interpreter User Impersonation</a></li>
                <li><a href="/docs/0.7.0/manual/interpreterexechooks.html">Interpreter Execution Hooks (Experimental)</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Available Interpreters</b><span></li>
                <li><a href="/docs/0.7.0/interpreter/alluxio.html">Alluxio</a></li>
                <li><a href="/docs/0.7.0/interpreter/beam.html">Beam</a></li>
                <li><a href="/docs/0.7.0/interpreter/bigquery.html">BigQuery</a></li>
                <li><a href="/docs/0.7.0/interpreter/cassandra.html">Cassandra</a></li>
                <li><a href="/docs/0.7.0/interpreter/elasticsearch.html">Elasticsearch</a></li>
                <li><a href="/docs/0.7.0/interpreter/flink.html">Flink</a></li>
                <li><a href="/docs/0.7.0/interpreter/geode.html">Geode</a></li>
                <li><a href="/docs/0.7.0/interpreter/hbase.html">HBase</a></li>
                <li><a href="/docs/0.7.0/interpreter/hdfs.html">HDFS</a></li>
                <li><a href="/docs/0.7.0/interpreter/hive.html">Hive</a></li>
                <li><a href="/docs/0.7.0/interpreter/ignite.html">Ignite</a></li>
                <li><a href="/docs/0.7.0/interpreter/jdbc.html">JDBC</a></li>
                <li><a href="/docs/0.7.0/interpreter/kylin.html">Kylin</a></li>
                <li><a href="/docs/0.7.0/interpreter/lens.html">Lens</a></li>
                <li><a href="/docs/0.7.0/interpreter/livy.html">Livy</a></li>
                <li><a href="/docs/0.7.0/interpreter/markdown.html">Markdown</a></li>
                <li><a href="/docs/0.7.0/interpreter/pig.html">Pig</a></li>
                <li><a href="/docs/0.7.0/interpreter/python.html">Python</a></li>
                <li><a href="/docs/0.7.0/interpreter/postgresql.html">Postgresql, HAWQ</a></li>
                <li><a href="/docs/0.7.0/interpreter/r.html">R</a></li>
                <li><a href="/docs/0.7.0/interpreter/scalding.html">Scalding</a></li>
                <li><a href="/docs/0.7.0/interpreter/scio.html">Scio</a></li>
                <li><a href="/docs/0.7.0/interpreter/shell.html">Shell</a></li>
                <li><a href="/docs/0.7.0/interpreter/spark.html">Spark</a></li>
              </ul>
            </li>
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Display System <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li class="title"><span><b>Basic Display System</b><span></li>
                <li><a href="/docs/0.7.0/displaysystem/basicdisplaysystem.html#text">Text</a></li>
                <li><a href="/docs/0.7.0/displaysystem/basicdisplaysystem.html#html">Html</a></li>
                <li><a href="/docs/0.7.0/displaysystem/basicdisplaysystem.html#table">Table</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Angular API</b><span></li>
                <li><a href="/docs/0.7.0/displaysystem/back-end-angular.html">Angular (backend API)</a></li>
                <li><a href="/docs/0.7.0/displaysystem/front-end-angular.html">Angular (frontend API)</a></li>
              </ul>
            </li>
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu" style="right: 0; left: auto;">
                <li class="title"><span><b>Notebook Storage</b><span></li>
                <li><a href="/docs/0.7.0/storage/storage.html#notebook-storage-in-local-git-repository">Git Storage</a></li>
                <li><a href="/docs/0.7.0/storage/storage.html#notebook-storage-in-s3">S3 Storage</a></li>
                <li><a href="/docs/0.7.0/storage/storage.html#notebook-storage-in-azure">Azure Storage</a></li>
                <li><a href="/docs/0.7.0/storage/storage.html#storage-in-zeppelinhub">ZeppelinHub Storage</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>REST API</b><span></li>
                <li><a href="/docs/0.7.0/rest-api/rest-interpreter.html">Interpreter API</a></li>
                <li><a href="/docs/0.7.0/rest-api/rest-notebook.html">Notebook API</a></li>
                <li><a href="/docs/0.7.0/rest-api/rest-configuration.html">Configuration API</a></li>
                <li><a href="/docs/0.7.0/rest-api/rest-credential.html">Credential API</a></li>
                <li><a href="/docs/0.7.0/rest-api/rest-helium.html">Helium API</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Security</b><span></li>
                <li><a href="/docs/0.7.0/security/shiroauthentication.html">Shiro Authentication</a></li>                
                <li><a href="/docs/0.7.0/security/notebook_authorization.html">Notebook Authorization</a></li>
                <li><a href="/docs/0.7.0/security/datasource_authorization.html">Data Source Authorization</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Advanced</b><span></li>
                <li><a href="/docs/0.7.0/install/virtual_machine.html">Zeppelin on Vagrant VM</a></li>
                <li><a href="/docs/0.7.0/install/spark_cluster_mode.html#spark-standalone-mode">Zeppelin on Spark Cluster Mode (Standalone)</a></li>
                <li><a href="/docs/0.7.0/install/spark_cluster_mode.html#spark-on-yarn-mode">Zeppelin on Spark Cluster Mode (YARN)</a></li>
                <li><a href="/docs/0.7.0/install/spark_cluster_mode.html#spark-on-mesos-mode">Zeppelin on Spark Cluster Mode (Mesos)</a></li>
                <li><a href="/docs/0.7.0/install/cdh.html">Zeppelin on CDH</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Contibute</b><span></li>
                <li><a href="/docs/0.7.0/development/writingzeppelininterpreter.html">Writing Zeppelin Interpreter</a></li>
                <li><a href="/docs/0.7.0/development/writingzeppelinvisualization.html">Writing Zeppelin Visualization (Experimental)</a></li>
                <li><a href="/docs/0.7.0/development/writingzeppelinapplication.html">Writing Zeppelin Application (Experimental)</a></li>
                <li><a href="/docs/0.7.0/development/howtocontribute.html">How to contribute (code)</a></li>
                <li><a href="/docs/0.7.0/development/howtocontributewebsite.html">How to contribute (website)</a></li>
              </ul>
            </li>
            <li>
              <a href="/docs/0.7.0/search.html" class="nav-search-link">
                <span class="fa fa-search nav-search-icon"></span>
              </a>
            </li>
          </ul>
        </nav><!--/.navbar-collapse -->
      </div>
    </div>



    <div class="content">
      
<!--<div class="hero-unit Writing a new Visualization(Experimental)">
  <h1></h1>
</div>
-->

<div class="row">
  <div class="col-md-12">
    <!--
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<h1>Writing a new Visualization (Experimental)</h1>

<div id="toc"></div>

<h2>What is Apache Zeppelin Visualization</h2>

<p>Apache Zeppelin Visualization is a pluggable package that can be loaded/unloaded on runtime through Helium framework in Zeppelin. A Visualization is a javascript npm package and user can use them just like any other built-in visualization in notebook.</p>

<h2>How it works</h2>

<h4>1. Load Helium package files from registry</h4>

<p>Zeppelin needs to know what Visualization packages are available. Zeppelin searches <em>Helium package file</em> from local registry (by default helium/ directory) by default.
<em>Helium package file</em> provides informations like name, artifact, and so on. It&#39;s similar to <em>package.json</em> in npm package.</p>

<p>Here&#39;s an example <code>helium/zeppelin-example-horizontalbar.json</code></p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
  &quot;type&quot; : &quot;VISUALIZATION&quot;,
  &quot;name&quot; : &quot;zeppelin_horizontalbar&quot;,
  &quot;description&quot; : &quot;Horizontal Bar chart (example)&quot;,
  &quot;artifact&quot; : &quot;./zeppelin-examples/zeppelin-example-horizontalbar&quot;,
  &quot;license&quot; : &quot;Apache-2.0&quot;,
  &quot;icon&quot; : &quot;&lt;i class=&#39;fa fa-bar-chart rotate90flipX&#39;&gt;&lt;/i&gt;&quot;
}
</code></pre></div>
<p>Check <a href="#3-create-helium-package-file">Create helium package file</a> section to learn about it.</p>

<h4>2. Enable packages</h4>

<p>Once Zeppelin loads <em>Helium package files</em> from local registry, available packages are displayed in Helium menu.</p>

<p>Click &#39;enable&#39; button.</p>

<p><img class="img-responsive" style="width:70%" src="../assets/themes/zeppelin/img/docs-img/writing_visualization_helium_menu.png" /></p>

<h4>3. Create and load visualization bundle on the fly</h4>

<p>Once a Visualization package is enabled, <a href="https://github.com/apache/zeppelin/blob/master/zeppelin-zengine/src/main/java/org/apache/zeppelin/helium/HeliumVisualizationFactory.java">HeliumVisualizationFactory</a> creates a js bundle. The js bundle is served by <code>helium/visualization/load</code> rest api endpoint.</p>

<h4>4. Run visualization</h4>

<p>Zeppelin shows additional button for loaded Visualizations.
User can use just like any other built-in visualizations.</p>

<p><img class="img-responsive" style="width:70%" src="../assets/themes/zeppelin/img/docs-img/writing_visualization_example.png" /></p>

<h2>Write new Visualization</h2>

<h4>1. Create a npm package</h4>

<p>Create a <a href="https://docs.npmjs.com/files/package.json">package.json</a> in your new Visualization directory. Normally, you can add any dependencies in package.json however Zeppelin Visualization package only allows two dependencies: <a href="https://github.com/apache/zeppelin/tree/master/zeppelin-web/src/app/visualization">zeppelin-vis</a> and <a href="https://github.com/apache/zeppelin/tree/master/zeppelin-web/src/app/tabledata">zeppelin-tabledata</a>.</p>

<p>Here&#39;s an example</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
  &quot;name&quot;: &quot;zeppelin_horizontalbar&quot;,
  &quot;description&quot; : &quot;Horizontal Bar chart&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;main&quot;: &quot;horizontalbar&quot;,
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;Apache-2.0&quot;,
  &quot;dependencies&quot;: {
    &quot;zeppelin-tabledata&quot;: &quot;*&quot;,
    &quot;zeppelin-vis&quot;: &quot;*&quot;
  }
}
</code></pre></div>
<h4>2. Create your own visualization</h4>

<p>To create your own visualization, you need to create a js file and import <a href="https://github.com/apache/zeppelin/blob/master/zeppelin-web/src/app/visualization/visualization.js">Visualization</a> class from <a href="https://github.com/apache/zeppelin/tree/master/zeppelin-web/src/app/visualization">zeppelin-vis</a> package and extend the class. <a href="https://github.com/apache/zeppelin/tree/master/zeppelin-web/src/app/tabledata">zeppelin-tabledata</a> package provides some useful transformations, like pivot, you can use in your visualization. (you can create your own transformation, too).</p>

<p><a href="https://github.com/apache/zeppelin/blob/master/zeppelin-web/src/app/visualization/visualization.js">Visualization</a> class, there&#39;re several methods that you need to override and implement. Here&#39;s simple visualization that just prints <code>Hello world</code>.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">import Visualization from &#39;zeppelin-vis&#39;
import PassthroughTransformation from &#39;zeppelin-tabledata/passthrough&#39;

export default class helloworld extends Visualization {
  constructor(targetEl, config) {
    super(targetEl, config)
    this.passthrough = new PassthroughTransformation(config);
  }

  render(tableData) {
    this.targetEl.html(&#39;Hello world!&#39;)
  }

  getTransformation() {
    return this.passthrough
  }
}
</code></pre></div>
<p>To learn more about <code>Visualization</code> class, check <a href="https://github.com/apache/zeppelin/blob/master/zeppelin-web/src/app/visualization/visualization.js">visualization.js</a>.</p>

<p>You can check complete visualization package example <a href="https://github.com/apache/zeppelin/tree/master/zeppelin-examples/zeppelin-example-horizontalbar">here</a>.</p>

<p>Zeppelin&#39;s built-in visualization uses the same API, so you can check <a href="https://github.com/apache/zeppelin/tree/master/zeppelin-web/src/app/visualization/builtins">built-in visualizations</a> as additional examples.</p>

<h4>3. Create <strong>Helium package file</strong></h4>

<p><strong>Helium Package file</strong> is a json file that provides information about the application.
Json file contains the following information</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{
  &quot;type&quot; : &quot;VISUALIZATION&quot;,
  &quot;name&quot; : &quot;zeppelin_horizontalbar&quot;,
  &quot;description&quot; : &quot;Horizontal Bar chart (example)&quot;,
  &quot;license&quot; : &quot;Apache-2.0&quot;,
  &quot;artifact&quot; : &quot;./zeppelin-examples/zeppelin-example-horizontalbar&quot;,
  &quot;icon&quot; : &quot;&lt;i class=&#39;fa fa-bar-chart rotate90flipX&#39;&gt;&lt;/i&gt;&quot;
}
</code></pre></div>
<h5>type</h5>

<p>When you&#39;re creating a visualization, &#39;type&#39; should be &#39;VISUALIZATION&#39;.
Check <a href="./writingzeppelinapplication.html">application</a> type if you&#39;re interested in the other types of package.</p>

<h5>name</h5>

<p>Name of visualization. Should be unique. Allows <code>[A-Za-z90-9_]</code>.</p>

<h5>description</h5>

<p>A short description about visualization.</p>

<h5>artifact</h5>

<p>Location of the visualization npm package. Support npm package with version or local filesystem path.</p>

<p>e.g.</p>

<p>When artifact exists in npm repository</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">artifact: &quot;my-visualiztion@1.0.0&quot;
</code></pre></div>
<p>When artifact exists in local file system</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">artifact: &quot;/path/to/my/visualization&quot;
</code></pre></div>
<h5>license</h5>

<p>License information.</p>

<p>e.g.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">license: &quot;Apache-2.0&quot;
</code></pre></div>
<h5>icon</h5>

<p>Icon to be used in visualization select button. String in this field will be rendered as a HTML tag.</p>

<p>e.g.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">icon: &quot;&lt;i class=&#39;fa fa-coffee&#39;&gt;&lt;/i&gt;&quot;
</code></pre></div>
<h4>4. Run in dev mode</h4>

<p>Place your <strong>Helium package file</strong> in local registry (ZEPPELIN_HOME/helium).
Run Zeppelin. And then run zeppelin-web in visualization dev mode.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cd zeppelin-web
yarn run visdev
</code></pre></div>
<p>You can browse localhost:9000. Everytime refresh your browser, Zeppelin will rebuild your visualization and reload changes.</p>

  </div>
</div>


      <hr>
      <footer>
        <!-- <p>&copy; 2017 The Apache Software Foundation</p>-->
      </footer>
    </div>

    


  <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45176241-5', 'zeppelin.apache.org');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>



  </body>
</html>

