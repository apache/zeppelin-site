
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Apache Zeppelin 0.7.3 Documentation: Pig Interpreter for Apache Zeppelin</title>
    <meta name="description" content="Apache Pig is a platform for analyzing large data sets that consists of a high-level language for expressing data analysis programs, coupled with infrastructure for evaluating these programs.">
    <meta name="author" content="The Apache Software Foundation">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Le styles -->
    <link href="/docs/0.7.3/assets/themes/zeppelin/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="/docs/0.7.3/assets/themes/zeppelin/css/style.css?body=1" rel="stylesheet" type="text/css">
    <link href="/docs/0.7.3/assets/themes/zeppelin/css/syntax.css" rel="stylesheet"  type="text/css" media="screen" /> 
    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- Js -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="/docs/0.7.3/assets/themes/zeppelin/bootstrap/js/bootstrap.min.js"></script>
    <script src="/docs/0.7.3/assets/themes/zeppelin/js/docs.js"></script>
    <script src="/docs/0.7.3/assets/themes/zeppelin/js/anchor.min.js"></script>
    <script src="/docs/0.7.3/assets/themes/zeppelin/js/toc.js"></script>
    <script src="/docs/0.7.3/assets/themes/zeppelin/js/lunr.min.js"></script>
    <script src="/docs/0.7.3/assets/themes/zeppelin/js/search.js"></script>    

    <!-- atom & rss feed -->
    <link href="/docs/0.7.3/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/docs/0.7.3/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
  </head>

  <body>
    
        <div id="menu" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="navbar-brand">
            <a class="navbar-brand-main" href="http://zeppelin.apache.org">
              <img src="/assets/themes/zeppelin/img/zeppelin_logo.png" width="50" alt="I'm zeppelin">
              <span style="vertical-align:middle">Zeppelin</span>
            </a>
            <a class="navbar-brand-version" href="/docs/0.7.3">
              <span><small>0.7.3</small></span>
            </a>
          </div>
        </div>
        <nav class="navbar-collapse collapse" role="navigation">
          <ul class="nav navbar-nav">
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Quick Start <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/docs/0.7.3/index.html">What is Apache Zeppelin ?</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Getting Started</b><span></li>
                <li><a href="/docs/0.7.3/install/install.html">Install</a></li>
                <li><a href="/docs/0.7.3/install/configuration.html">Configuration</a></li>
                <li><a href="/docs/0.7.3/quickstart/explorezeppelinui.html">Explore Zeppelin UI</a></li>
                <li><a href="/docs/0.7.3/quickstart/tutorial.html">Tutorial</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Basic Feature Guide</b><span></li>
                <li><a href="/docs/0.7.3/manual/dynamicform.html">Dynamic Form</a></li>
                <li><a href="/docs/0.7.3/manual/publish.html">Publish your Paragraph</a></li>
                <li><a href="/docs/0.7.3/manual/notebookashomepage.html">Customize Zeppelin Homepage</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>More</b><span></li>
                <li><a href="/docs/0.7.3/install/upgrade.html">Upgrade Zeppelin Version</a></li>
                <li><a href="/docs/0.7.3/install/build.html">Build from source</a></li>
                <li><a href="/docs/0.7.3/quickstart/install_with_flink_and_spark_cluster.html">Install Zeppelin with Flink and Spark Clusters Tutorial</a></li>
              </ul>
            </li>
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Interpreter <b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu">
                <li><a href="/docs/0.7.3/manual/interpreters.html">Overview</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Usage</b><span></li>
                <li><a href="/docs/0.7.3/manual/interpreterinstallation.html">Interpreter Installation</a></li>
                <!--<li><a href="/docs/0.7.3/manual/dynamicinterpreterload.html">Dynamic Interpreter Loading</a></li>-->
                <li><a href="/docs/0.7.3/manual/dependencymanagement.html">Interpreter Dependency Management</a></li>
                <li><a href="/docs/0.7.3/manual/userimpersonation.html">Interpreter User Impersonation</a></li>
                <li><a href="/docs/0.7.3/manual/interpreterexechooks.html">Interpreter Execution Hooks (Experimental)</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Available Interpreters</b><span></li>
                <li><a href="/docs/0.7.3/interpreter/alluxio.html">Alluxio</a></li>
                <li><a href="/docs/0.7.3/interpreter/beam.html">Beam</a></li>
                <li><a href="/docs/0.7.3/interpreter/bigquery.html">BigQuery</a></li>
                <li><a href="/docs/0.7.3/interpreter/cassandra.html">Cassandra</a></li>
                <li><a href="/docs/0.7.3/interpreter/elasticsearch.html">Elasticsearch</a></li>
                <li><a href="/docs/0.7.3/interpreter/flink.html">Flink</a></li>
                <li><a href="/docs/0.7.3/interpreter/geode.html">Geode</a></li>
                <li><a href="/docs/0.7.3/interpreter/hbase.html">HBase</a></li>
                <li><a href="/docs/0.7.3/interpreter/hdfs.html">HDFS</a></li>
                <li><a href="/docs/0.7.3/interpreter/hive.html">Hive</a></li>
                <li><a href="/docs/0.7.3/interpreter/ignite.html">Ignite</a></li>
                <li><a href="/docs/0.7.3/interpreter/jdbc.html">JDBC</a></li>
                <li><a href="/docs/0.7.3/interpreter/kylin.html">Kylin</a></li>
                <li><a href="/docs/0.7.3/interpreter/lens.html">Lens</a></li>
                <li><a href="/docs/0.7.3/interpreter/livy.html">Livy</a></li>
                <li><a href="/docs/0.7.3/interpreter/markdown.html">Markdown</a></li>
                <li><a href="/docs/0.7.3/interpreter/pig.html">Pig</a></li>
                <li><a href="/docs/0.7.3/interpreter/python.html">Python</a></li>
                <li><a href="/docs/0.7.3/interpreter/postgresql.html">Postgresql, HAWQ</a></li>
                <li><a href="/docs/0.7.3/interpreter/r.html">R</a></li>
                <li><a href="/docs/0.7.3/interpreter/scalding.html">Scalding</a></li>
                <li><a href="/docs/0.7.3/interpreter/scio.html">Scio</a></li>
                <li><a href="/docs/0.7.3/interpreter/shell.html">Shell</a></li>
                <li><a href="/docs/0.7.3/interpreter/spark.html">Spark</a></li>
              </ul>
            </li>
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Display System <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li class="title"><span><b>Basic Display System</b><span></li>
                <li><a href="/docs/0.7.3/displaysystem/basicdisplaysystem.html#text">Text</a></li>
                <li><a href="/docs/0.7.3/displaysystem/basicdisplaysystem.html#html">Html</a></li>
                <li><a href="/docs/0.7.3/displaysystem/basicdisplaysystem.html#table">Table</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Angular API</b><span></li>
                <li><a href="/docs/0.7.3/displaysystem/back-end-angular.html">Angular (backend API)</a></li>
                <li><a href="/docs/0.7.3/displaysystem/front-end-angular.html">Angular (frontend API)</a></li>
              </ul>
            </li>
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu" style="right: 0; left: auto;">
                <li class="title"><span><b>Notebook Storage</b><span></li>
                <li><a href="/docs/0.7.3/storage/storage.html#notebook-storage-in-local-git-repository">Git Storage</a></li>
                <li><a href="/docs/0.7.3/storage/storage.html#notebook-storage-in-s3">S3 Storage</a></li>
                <li><a href="/docs/0.7.3/storage/storage.html#notebook-storage-in-azure">Azure Storage</a></li>
                <li><a href="/docs/0.7.3/storage/storage.html#storage-in-zeppelinhub">ZeppelinHub Storage</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>REST API</b><span></li>
                <li><a href="/docs/0.7.3/rest-api/rest-interpreter.html">Interpreter API</a></li>
                <li><a href="/docs/0.7.3/rest-api/rest-notebook.html">Notebook API</a></li>
                <li><a href="/docs/0.7.3/rest-api/rest-notebookRepo.html">Notebook Repository API</a></li>
                <li><a href="/docs/0.7.3/rest-api/rest-configuration.html">Configuration API</a></li>
                <li><a href="/docs/0.7.3/rest-api/rest-credential.html">Credential API</a></li>
                <li><a href="/docs/0.7.3/rest-api/rest-helium.html">Helium API</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Security</b><span></li>
                <li><a href="/docs/0.7.3/security/shiroauthentication.html">Shiro Authentication</a></li>                
                <li><a href="/docs/0.7.3/security/notebook_authorization.html">Notebook Authorization</a></li>
                <li><a href="/docs/0.7.3/security/datasource_authorization.html">Data Source Authorization</a></li>
                <li><a href="/docs/0.7.3/security/http_security_headers.html">HTTP Security Headers</a></li>
                <li><a href="/docs/0.7.3/security/helium_authorization.html">Helium Authorization</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Advanced</b><span></li>
                <li><a href="/docs/0.7.3/install/virtual_machine.html">Zeppelin on Vagrant VM</a></li>
                <li><a href="/docs/0.7.3/install/spark_cluster_mode.html#spark-standalone-mode">Zeppelin on Spark Cluster Mode (Standalone)</a></li>
                <li><a href="/docs/0.7.3/install/spark_cluster_mode.html#spark-on-yarn-mode">Zeppelin on Spark Cluster Mode (YARN)</a></li>
                <li><a href="/docs/0.7.3/install/spark_cluster_mode.html#spark-on-mesos-mode">Zeppelin on Spark Cluster Mode (Mesos)</a></li>
                <li><a href="/docs/0.7.3/install/cdh.html">Zeppelin on CDH</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span><b>Contibute</b><span></li>
                <li><a href="/docs/0.7.3/development/writingzeppelininterpreter.html">Writing Zeppelin Interpreter</a></li>
                <li><a href="/docs/0.7.3/development/writingzeppelinvisualization.html">Writing Zeppelin Visualization (Experimental)</a></li>
                <li><a href="/docs/0.7.3/development/writingzeppelinapplication.html">Writing Zeppelin Application (Experimental)</a></li>
                <li><a href="/docs/0.7.3/development/howtocontribute.html">How to contribute (code)</a></li>
                <li><a href="/docs/0.7.3/development/howtocontributewebsite.html">How to contribute (website)</a></li>
              </ul>
            </li>
            <li>
              <a href="/docs/0.7.3/search.html" class="nav-search-link">
                <span class="fa fa-search nav-search-icon"></span>
              </a>
            </li>
          </ul>
        </nav><!--/.navbar-collapse -->
      </div>
    </div>



    <div class="content">
      
<!--<div class="hero-unit Pig Interpreter for Apache Zeppelin">
  <h1></h1>
</div>
-->

<div class="row">
  <div class="col-md-12">
    <h1>Pig Interpreter for Apache Zeppelin</h1>

<div id="toc"></div>

<h2>Overview</h2>

<p><a href="https://pig.apache.org/">Apache Pig</a> is a platform for analyzing large data sets that consists of a high-level language for expressing data analysis programs, coupled with infrastructure for evaluating these programs. The salient property of Pig programs is that their structure is amenable to substantial parallelization, which in turns enables them to handle very large data sets.</p>

<h2>Supported interpreter type</h2>

<ul>
<li><p><code>%pig.script</code> (default Pig interpreter, so you can use <code>%pig</code>)</p>

<p><code>%pig.script</code> is like the Pig grunt shell. Anything you can run in Pig grunt shell can be run in <code>%pig.script</code> interpreter, it is used for running Pig script where you don’t need to visualize the data, it is suitable for data munging. </p></li>
<li><p><code>%pig.query</code></p>

<p><code>%pig.query</code> is a little different compared with <code>%pig.script</code>. It is used for exploratory data analysis via Pig latin where you can leverage Zeppelin’s visualization ability. There&#39;re 2 minor differences in the last statement between <code>%pig.script</code> and <code>%pig.query</code></p>

<ul>
<li>No pig alias in the last statement in <code>%pig.query</code> (read the examples below).</li>
<li>The last statement must be in single line in <code>%pig.query</code></li>
</ul></li>
</ul>

<h2>How to use</h2>

<h3>How to setup Pig execution modes.</h3>

<ul>
<li><p>Local Mode</p>

<p>Set <code>zeppelin.pig.execType</code> as <code>local</code>.</p></li>
<li><p>MapReduce Mode</p>

<p>Set <code>zeppelin.pig.execType</code> as <code>mapreduce</code>. HADOOP_CONF_DIR needs to be specified in <code>ZEPPELIN_HOME/conf/zeppelin-env.sh</code>.</p></li>
<li><p>Tez Local Mode</p>

<p>Only Tez 0.7 is supported. Set <code>zeppelin.pig.execType</code> as <code>tez_local</code>.</p></li>
<li><p>Tez Mode</p>

<p>Only Tez 0.7 is supported. Set <code>zeppelin.pig.execType</code> as <code>tez</code>. HADOOP_CONF_DIR and TEZ_CONF_DIR needs to be specified in <code>ZEPPELIN_HOME/conf/zeppelin-env.sh</code>.</p></li>
<li><p>Spark Local Mode</p>

<p>Only Spark 1.6.x is supported, by default it is Spark 1.6.3. Set <code>zeppelin.pig.execType</code> as <code>spark_local</code>.</p></li>
<li><p>Spark Mode</p>

<p>Only Spark 1.6.x is supported, by default it is Spark 1.6.3. Set <code>zeppelin.pig.execType</code> as <code>spark</code>. For now, only yarn-client mode is supported. To enable it, you need to set property <code>SPARK_MASTER</code> to yarn-client and set <code>SPARK_JAR</code> to the spark assembly jar.</p></li>
</ul>

<h3>How to choose custom Spark Version</h3>

<p>By default, Pig Interpreter would use Spark 1.6.3 built with scala 2.10, if you want to use another spark version or scala version, 
you need to rebuild Zeppelin by specifying the custom Spark version via -Dpig.spark.version=<custom_spark_version> and scala version via -Dpig.scala.version=<scala_version> in the maven build command.</p>

<h3>How to configure interpreter</h3>

<p>At the Interpreters menu, you have to create a new Pig interpreter. Pig interpreter has below properties by default.
And you can set any Pig properties here which will be passed to Pig engine. (like tez.queue.name &amp; mapred.job.queue.name).
Besides, we use paragraph title as job name if it exists, else use the last line of Pig script. So you can use that to find app running in YARN RM UI.</p>

<table class="table-configuration">
    <tr>
        <th>Property</th>
        <th>Default</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>zeppelin.pig.execType</td>
        <td>mapreduce</td>
        <td>Execution mode for pig runtime. local | mapreduce | tez_local | tez | spark_local | spark </td>
    </tr>
    <tr>
        <td>zeppelin.pig.includeJobStats</td>
        <td>false</td>
        <td>whether display jobStats info in <code>%pig.script</code></td>
    </tr>
    <tr>
        <td>zeppelin.pig.maxResult</td>
        <td>1000</td>
        <td>max row number displayed in <code>%pig.query</code></td>
    </tr>
    <tr>
        <td>tez.queue.name</td>
        <td>default</td>
        <td>queue name for tez engine</td>
    </tr>
    <tr>
        <td>mapred.job.queue.name</td>
        <td>default</td>
        <td>queue name for mapreduce engine</td>
    </tr>
    <tr>
        <td>SPARK_MASTER</td>
        <td>local</td>
        <td>local | yarn-client</td>
    </tr>
    <tr>
        <td>SPARK_JAR</td>
        <td></td>
        <td>The spark assembly jar, both jar in local or hdfs is supported. Put it on hdfs could have
        performance benefit</td>
    </tr>
</table>  

<h3>Example</h3>

<h5>pig</h5>
<div class="highlight"><pre><code class="text language-text" data-lang="text">%pig

bankText = load &#39;bank.csv&#39; using PigStorage(&#39;;&#39;);
bank = foreach bankText generate $0 as age, $1 as job, $2 as marital, $3 as education, $5 as balance; 
bank = filter bank by age != &#39;&quot;age&quot;&#39;;
bank = foreach bank generate (int)age, REPLACE(job,&#39;&quot;&#39;,&#39;&#39;) as job, REPLACE(marital, &#39;&quot;&#39;, &#39;&#39;) as marital, (int)(REPLACE(balance, &#39;&quot;&#39;, &#39;&#39;)) as balance;
store bank into &#39;clean_bank.csv&#39; using PigStorage(&#39;;&#39;); -- this statement is optional, it just show you that most of time %pig.script is used for data munging before querying the data. 
</code></pre></div>
<h5>pig.query</h5>

<p>Get the number of each age where age is less than 30</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">%pig.query

bank_data = filter bank by age &lt; 30;
b = group bank_data by age;
foreach b generate group, COUNT($1);
</code></pre></div>
<p>The same as above, but use dynamic text form so that use can specify the variable maxAge in textbox. (See screenshot below). Dynamic form is a very cool feature of Zeppelin, you can refer this <a href="(../manual/dynamicform.html">link</a>) for details.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">%pig.query

bank_data = filter bank by age &lt; ${maxAge=40};
b = group bank_data by age;
foreach b generate group, COUNT($1) as count;
</code></pre></div>
<p>Get the number of each age for specific marital type, also use dynamic form here. User can choose the marital type in the dropdown list (see screenshot below).</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">%pig.query

bank_data = filter bank by marital==&#39;${marital=single,single|divorced|married}&#39;;
b = group bank_data by age;
foreach b generate group, COUNT($1) as count;
</code></pre></div>
<p>The above examples are in the Pig tutorial note in Zeppelin, you can check that for details. Here&#39;s the screenshot.</p>

<p><img class="img-responsive" width="1024px" style="margin:0 auto; padding: 26px;" src="../assets/themes/zeppelin/img/pig_zeppelin_tutorial.png" /></p>

<p>Data is shared between <code>%pig</code> and <code>%pig.query</code>, so that you can do some common work in <code>%pig</code>, and do different kinds of query based on the data of <code>%pig</code>. 
Besides, we recommend you to specify alias explicitly so that the visualization can display the column name correctly. In the above example 2 and 3 of <code>%pig.query</code>, we name <code>COUNT($1)</code> as <code>count</code>. If you don&#39;t do this,
then we will name it using position. E.g. in the above first example of <code>%pig.query</code>, we will use <code>col_1</code> in chart to represent <code>COUNT($1)</code>.</p>

  </div>
</div>


      <hr>
      <footer>
        <!-- <p>&copy; 2017 The Apache Software Foundation</p>-->
      </footer>
    </div>

    


  <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45176241-5', 'zeppelin.apache.org');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>



  </body>
</html>

