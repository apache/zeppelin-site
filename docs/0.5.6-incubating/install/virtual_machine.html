
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Install A Zeppelin ready Virtual Machine</title>
    <meta name="description" content="">
    <meta name="author" content="The Apache Software Foundation">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/docs/0.5.6-incubating/assets/themes/zeppelin/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="/docs/0.5.6-incubating/assets/themes/zeppelin/css/style.css?body=1" rel="stylesheet" type="text/css">
    <link href="/docs/0.5.6-incubating/assets/themes/zeppelin/css/syntax.css" rel="stylesheet"  type="text/css" media="screen" /> 
    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- Js -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="/docs/0.5.6-incubating/assets/themes/zeppelin/bootstrap/js/bootstrap.min.js"></script>
    <script src="/docs/0.5.6-incubating/assets/themes/zeppelin/js/docs.js"></script>

    <!-- atom & rss feed -->
    <link href="/docs/0.5.6-incubating/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/docs/0.5.6-incubating/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
  </head>

  <body>
    
        <div id="menu" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/docs/0.5.6-incubating">
            <img src="/assets/themes/zeppelin/img/zeppelin_logo.png" width="50" alt="I'm zeppelin">
            <span style="vertical-align:middle">Zeppelin</span>
            <span style="vertical-align:baseline"><small>(0.5.6-incubating)</small></span>
          </a>
        </div>
        <nav class="navbar-collapse collapse" role="navigation">
          <ul class="nav navbar-nav">
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Quick Start <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <!-- li><span><b>Overview</b><span></li -->
                <li><a href="/docs/0.5.6-incubating/index.html">Overview</a></li>
                <li role="separator" class="divider"></li>
                <!-- li><span><b>Install</b><span></li -->
                <li><a href="/docs/0.5.6-incubating/install/install.html">Install</a></li>
                <li><a href="/docs/0.5.6-incubating/install/yarn_install.html">YARN Install</a></li>
                <li><a href="/docs/0.5.6-incubating/install/virtual_machine.html">Virtual Machine Install</a></li>
                <li role="separator" class="divider"></li>
                <!-- li><span><b>Tutorial</b><span></li -->
                <li><a href="/docs/0.5.6-incubating/tutorial/tutorial.html">Tutorial</a></li>
                <li role="separator" class="divider"></li>
                <!-- li><span><b>Guide</b><span></li -->
                <li><a href="/docs/0.5.6-incubating/manual/dynamicform.html">Dynamic Form</a></li>
              </ul>
            </li>
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Interpreter <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/docs/0.5.6-incubating/manual/interpreters.html">Overview</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/cassandra.html">Cassandra</a></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/elasticsearch.html">Elasticsearch</a></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/flink.html">Flink</a></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/geode.html">Geode</a></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/hive.html">Hive</a></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/ignite.html">Ignite</a></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/lens.html">Lens</a></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/markdown.html">Markdown</a></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/postgresql.html">Postgresql, hawq</a></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/scalding.html">Scalding</a></li>
                <li><a href="/docs/0.5.6-incubating/pleasecontribute.html">Shell</a></li>
                <li><a href="/docs/0.5.6-incubating/interpreter/spark.html">Spark</a></li>
                <li><a href="/docs/0.5.6-incubating/pleasecontribute.html">Tajo</a></li>
              </ul>
            </li>
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Display System <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/docs/0.5.6-incubating/displaysystem/display.html">Text</a></li>
                <li><a href="/docs/0.5.6-incubating/displaysystem/display.html#html">Html</a></li>
                <li><a href="/docs/0.5.6-incubating/displaysystem/table.html">Table</a></li>
                <li><a href="/docs/0.5.6-incubating/displaysystem/angular.html">Angular</a></li>
              </ul>
            </li>
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">More <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <!-- li><span><b>Manual</b><span></li -->
                <li><a href="/docs/0.5.6-incubating/manual/notebookashomepage.html">Notebook as Homepage</a></li>
                <li role="separator" class="divider"></li>
                <!-- li><span><b>Notebook Storage</b><span></li -->
                <li><a href="/docs/0.5.6-incubating/storage/storage.html#Git">Git Storage</a></li>
                <li><a href="/docs/0.5.6-incubating/storage/storage.html#S3">S3 Storage</a></li>
                <li role="separator" class="divider"></li>
                <!-- li><span><b>REST API</b><span></li -->
                <li><a href="/docs/0.5.6-incubating/rest-api/rest-interpreter.html">Interpreter API</a></li>
                <li><a href="/docs/0.5.6-incubating/rest-api/rest-notebook.html">Notebook API</a></li>
                <li role="separator" class="divider"></li>
                <!-- li><span><b>Development</b><span></li -->
                <li><a href="/docs/0.5.6-incubating/development/writingzeppelininterpreter.html">Writing Zeppelin Interpreter</a></li>
                <li><a href="/docs/0.5.6-incubating/development/howtocontribute.html">How to contribute (code)</a></li>
                <li><a href="/docs/0.5.6-incubating/development/howtocontributewebsite.html">How to contribute (website)</a></li>
              </ul>
            </li>
          </ul>
        </nav><!--/.navbar-collapse -->
      </div>
    </div>


    <div class="container">
      
<!--<div class="hero-unit Install A Zeppelin ready Virtual Machine">
  <h1></h1>
</div>
-->

<div class="row">
  <div class="col-md-12">
    <!--
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<h2>Vagrant Virtual Machine for Apache Zeppelin</h2>

<p>The Apache Zeppelin distribution includes a scripts directory</p>

<p><code>scripts/vagrant/zeppelin-dev</code></p>

<p>This script creates a virtual machine that launches a repeatable, known set of core dependencies required for developing Zeppelin.  It can also be used to run an existing Zeppelin build if you don&#39;t plan to build from source.  For pyspark users, this script also includes several helpful <a href="#pythonextras">Python Libraries</a></p>

<h4>Installing the required components to launch a virtual machine.</h4>

<p>This script requires three applications, <a href="http://docs.ansible.com/ansible/intro_installation.html#latest-releases-via-pip" title="Ansible">Ansible</a>, <a href="http://www.vagrantup.com/downloads" title="Vagrant">Vagrant</a> and <a href="https://www.virtualbox.org/" title="Virtual Box">Virtual Box</a>.  All of these applications are freely available as Open Source projects and extremely easy to set up on most operating systems.</p>

<h3>Create a Zeppelin Ready VM in 4 Steps (5 on Windows)</h3>

<p><em>If you are running Windows and don&#39;t yet have python installed, install Python 2.7.x</em>  <a href="https://www.python.org/downloads/release/python-2710/">Python Windows Installer</a></p>

<ol>
<li>Download and Install Vagrant:  <a href="http://www.vagrantup.com/downloads">Vagrant Downloads</a></li>
<li>Install Ansible:  <a href="http://docs.ansible.com/ansible/intro_installation.html#latest-releases-via-pip">Ansible Python pip install</a><br>
<code>sudo easy_install pip</code> then<br>
<code>sudo pip install ansible</code><br>
<code>ansible --version</code> should now report version 1.9.2 or higher</li>
<li>Install Virtual Box: <a href="https://www.virtualbox.org/" title="Virtual Box">Virtual Box Downloads</a></li>
<li>Type <code>vagrant up</code>  from within the <code>/scripts/vagrant/zeppelin-dev</code> directory</li>
</ol>

<p>Thats it!</p>

<p>You can now run <code>vagrant ssh</code> and this will place you into the guest machines terminal prompt.</p>

<p>If you don&#39;t wish to build Zeppelin from scratch, run the z-manager installer script while running in the guest VM:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">curl -fsSL https://raw.githubusercontent.com/NFLabs/z-manager/master/zeppelin-installer.sh | bash
</code></pre></div>
<h3>Building Zeppelin</h3>

<p>You can now <code>git clone https://github.com/apache/incubator-zeppelin.git</code> into a directory on your host machine, or directly in your virtual machine.</p>

<p>Cloning zeppelin into the <code>/scripts/vagrant/zeppelin-dev</code> directory from the host, will allow the directory to be shared between your host and the guest machine.</p>

<p>Cloning the project again may seem counter intuitive, since this script likley originated from the project repository.  Consider copying just the vagrant/zeppelin-dev script from the zeppelin project as a stand alone directory, then once again clone the specific branch you wish to build.</p>

<p>Synced folders enable Vagrant to sync a folder on the host machine to the guest machine, allowing you to continue working on your project&#39;s files on your host machine, but use the resources in the guest machine to compile or run your project. <em><a href="https://docs.vagrantup.com/v2/synced-folders/index.html">(1) Synced Folder Description from Vagrant Up</a></em></p>

<p>By default, Vagrant will share your project directory (the directory with the Vagrantfile) to <code>/vagrant</code>.  Which means you should be able to build within the guest machine after you<br>
<code>cd /vagrant/incubator-zeppelin</code></p>

<h3>What&#39;s in this VM?</h3>

<p>Running the following commands in the guest machine should display these expected versions:</p>

<p><code>node --version</code> should report <em>v0.12.7</em><br>
<code>mvn --version</code> should report <em>Apache Maven 3.3.3</em> and <em>Java version: 1.7.0_85</em></p>

<p>The virtual machine consists of:</p>

<ul>
<li>Ubuntu Server 14.04 LTS</li>
<li>Node.js 0.12.7</li>
<li>npm 2.11.3</li>
<li>ruby 1.9.3 + rake, make and bundler (only required if building jekyll documentation)</li>
<li>Maven 3.3.3</li>
<li>Git</li>
<li>Unzip</li>
<li>libfontconfig to avoid phatomJs missing dependency issues</li>
<li>openjdk-7-jdk</li>
<li>Python addons: pip, matplotlib, scipy, numpy, pandas</li>
</ul>

<h3>How to build &amp; run Zeppelin</h3>

<p>This assumes you&#39;ve already cloned the project either on the host machine in the zeppelin-dev directory (to be shared with the guest machine) or cloned directly into a directory while running inside the guest machine.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">cd /incubator-zeppelin
mvn clean package -Pspark-1.5 -Ppyspark -Dhadoop.version=2.2.0 -Phadoop-2.2 -DskipTests
./bin/zeppelin-daemon.sh start
</code></pre></div>
<p>On your host machine browse to <code>http://localhost:8080/</code></p>

<p>If you <a href="#tweakvm">turned off port forwarding</a> in the <code>Vagrantfile</code> browse to <code>http://192.168.51.52:8080</code></p>

<h3><a href="id:tweakvm">Tweaking the Virtual Machine</a></h3>

<p>If you plan to run this virtual machine along side other Vagrant images, you may wish to bind the virtual machine to a specific IP address, and not use port fowarding from your local host.</p>

<p>Comment out the <code>forward_port</code> line, and uncomment the <code>private_network</code> line in Vagrantfile.  The subnet that works best for your local network will vary so adjust <code>192.168.*.*</code> accordingly.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">#config.vm.network &quot;forwarded_port&quot;, guest: 8080, host: 8080
config.vm.network &quot;private_network&quot;, ip: &quot;192.168.51.52&quot;
</code></pre></div>
<p><code>vagrant halt</code> followed by <code>vagrant up</code> will restart the guest machine bound to the IP address of <code>192.168.51.52</code>.<br>
This approach usually is typically required if running other virtual machines that discover each other directly by IP address, such as Spark Masters and Slaves as well as Cassandra Nodes, Elasticsearch Nodes, and other Spark data sources.  You may wish to launch nodes in virtual machines with IP Addresses in a subnet that works for your local network, such as: 192.168.51.53, 192.168.51.54, 192.168.51.53, etc..</p>

<h3><a href="id:pythonextras">Python Extras</a></h3>

<p>With zeppelin running, Numpy, SciPy, Pandas and Matplotlib will be available.  Create a pyspark notebook, and try</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">%pyspark

import numpy
import scipy
import pandas
import matplotlib

print &quot;numpy &quot; + numpy.__version__ 
print &quot;scipy &quot; + scipy.__version__
print &quot;pandas &quot; + pandas.__version__
print &quot;matplotlib &quot; + matplotlib.__version__
</code></pre></div>
<p>To Test plotting using matplotlib into a rendered %html SVG image, try</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">%pyspark

import matplotlib
matplotlib.use(&#39;Agg&#39;)   # turn off interactive charting so this works for server side SVG rendering
import matplotlib.pyplot as plt
import numpy as np
import StringIO

# clear out any previous plots on this notebook
plt.clf()

def show(p):
    img = StringIO.StringIO()
    p.savefig(img, format=&#39;svg&#39;)
    img.seek(0)
    print &quot;%html &lt;div style=&#39;width:600px&#39;&gt;&quot; + img.buf + &quot;&lt;/div&gt;&quot;

# Example data
people = (&#39;Tom&#39;, &#39;Dick&#39;, &#39;Harry&#39;, &#39;Slim&#39;, &#39;Jim&#39;)
y_pos = np.arange(len(people))
performance = 3 + 10 * np.random.rand(len(people))
error = np.random.rand(len(people))

plt.barh(y_pos, performance, xerr=error, align=&#39;center&#39;, alpha=0.4)
plt.yticks(y_pos, people)
plt.xlabel(&#39;Performance&#39;)
plt.title(&#39;How fast do you want to go today?&#39;)

show(plt)
</code></pre></div>
  </div>
</div>


      <hr>
      <footer>
        <!-- <p>&copy; 2016 The Apache Software Foundation</p>-->
      </footer>
    </div>

    


  <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45176241-5', 'zeppelin.incubator.apache.org');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>



  </body>
</html>

